{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u0418\\u043B\\u044C\\u044F\\\\Desktop\\\\marvel_starter\\\\src\\\\components\\\\comicsList\\\\ComicsList.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport Spinner from '../spinner/spinner';\nimport useMarvelService from '../../services/MarvelService';\nimport './comicsList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ComicsList = props => {\n  _s();\n  const [comicsList, setComicsList] = useState([]);\n  const [newComicsLoading, setNewComicsLoading] = useState(false);\n  const [offset, setOffset] = useState(0);\n  const [comicsEnded, setComicsEnded] = useState(false);\n  const {\n    loading,\n    error,\n    getAllComics\n  } = useMarvelService();\n  useEffect(() => {\n    onRequest(offset, true);\n  }, []);\n  const onRequest = (offset, initial) => {\n    initial ? setNewComicsLoading(false) : setNewComicsLoading(true);\n    getAllComics(offset).then(onComicsListLoaded);\n  };\n  const onComicsListLoaded = newComicsList => {\n    let ended = false;\n    if (newcComicsList.length < 8) {\n      ended = true;\n    }\n    setComicsList(comicsList => [...comicsList, ...newComicsList]);\n    setNewComicsLoading(newComicsLoading => false);\n    setOffset(offset => offset + 8);\n    setComicsEnded(comicsEnded => ended);\n  };\n  function renderItems(arr) {\n    const items = arr.map((item, i) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"comics__item\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.thumbnail,\n            alt: item.title,\n            className: \"comics__item-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-name\",\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comics__item-price\",\n            children: item.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"comics__grid\",\n      children: items\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n  const items = renderItems(comicsList);\n  const errorMessage = error ? /*#__PURE__*/_jsxDEV(ErrorMessage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 34\n  }, this) : null;\n  const spinner = loading && !newItemLoading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 50\n  }, this) : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comics__list\",\n    children: [errorMessage, spinner, items, /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button button__main button__long\",\n      disabled: newComicsLoading,\n      style: {\n        'display': charEnded ? 'none' : 'block'\n      },\n      onClick: () => onRequest(offset),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner\",\n        children: \"load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n_s(ComicsList, \"ev+d1lv6jd1WKxEZZbNwAIU7iSw=\", false, function () {\n  return [useMarvelService];\n});\n_c = ComicsList;\nexport default ComicsList;\nvar _c;\n$RefreshReg$(_c, \"ComicsList\");","map":{"version":3,"names":["useEffect","useState","useRef","ErrorMessage","Spinner","useMarvelService","jsxDEV","_jsxDEV","ComicsList","props","_s","comicsList","setComicsList","newComicsLoading","setNewComicsLoading","offset","setOffset","comicsEnded","setComicsEnded","loading","error","getAllComics","onRequest","initial","then","onComicsListLoaded","newComicsList","ended","newcComicsList","length","renderItems","arr","items","map","item","i","className","children","href","src","thumbnail","alt","title","fileName","_jsxFileName","lineNumber","columnNumber","name","price","errorMessage","spinner","newItemLoading","disabled","style","charEnded","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Илья/Desktop/marvel_starter/src/components/comicsList/ComicsList.js"],"sourcesContent":["import { useEffect,useState,useRef } from 'react';\n\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport Spinner from '../spinner/spinner';\nimport useMarvelService from '../../services/MarvelService';\n\nimport './comicsList.scss';\n\nconst ComicsList = (props) => {\n\n    const [comicsList, setComicsList] = useState([]);\n    const [newComicsLoading, setNewComicsLoading] = useState(false);\n    const [offset, setOffset] = useState(0);\n    const [comicsEnded, setComicsEnded] = useState(false);\n\n    const {loading, error, getAllComics} = useMarvelService();\n\n    useEffect(()=>{\n        onRequest(offset,true)\n    },[])\n\n    const onRequest =(offset,initial)=>{\n        initial ? setNewComicsLoading(false) : setNewComicsLoading(true);\n        getAllComics(offset)\n        .then(onComicsListLoaded)\n    } \n\n    const onComicsListLoaded =(newComicsList)=>{\n        let ended = false\n        if(newcComicsList.length<8){\n            ended=true\n        }\n\n        setComicsList(comicsList=>[...comicsList,...newComicsList]);\n        setNewComicsLoading(newComicsLoading=>false);\n        setOffset(offset=>offset+8)\n        setComicsEnded(comicsEnded=>ended)\n    }\n\n    function renderItems(arr){\n        const items = arr.map((item,i)=>{\n            return(\n                <li className=\"comics__item\" key={i}>\n                    <a href=\"#\">\n                        <img src={item.thumbnail} alt={item.title} className=\"comics__item-img\"/>\n                        <div className=\"comics__item-name\">{item.name}</div>\n                        <div className=\"comics__item-price\">{item.price}</div>\n                    </a>\n                </li>\n            );\n        });\n        return(\n            <ul className=\"comics__grid\">\n                {items}\n            </ul>\n        )\n    }\n    const items = renderItems(comicsList);\n\n    const errorMessage = error ? <ErrorMessage/> : null;\n    const spinner = loading && !newItemLoading ? <Spinner/> : null;\n    \n    return (\n        <div className=\"comics__list\">\n            {errorMessage}\n            {spinner}\n            {items}\n            <button className=\"button button__main button__long\"\n                    disabled={newComicsLoading}\n                    style={{'display': charEnded ? 'none' : 'block'}}\n                    onClick={() => onRequest(offset)}> \n                <div className=\"inner\">load more</div>\n            </button>\n        </div>\n    )\n}\n\nexport default ComicsList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}